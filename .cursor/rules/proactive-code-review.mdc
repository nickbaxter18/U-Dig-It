# Proactive Code Review

## üéØ Purpose
Automatically review all code before presenting it to the user, catching issues proactively and reducing review cycles.

---

## Review Process

**Before presenting ANY code to user**, I will perform comprehensive self-review across all dimensions:

1. **Security Review** ‚Üí Check for vulnerabilities
2. **Performance Review** ‚Üí Check for bottlenecks
3. **Business Logic Review** ‚Üí Verify correctness
4. **Code Quality Review** ‚Üí Check standards compliance
5. **Accessibility Review** ‚Üí Verify WCAG compliance

**Output Format**: Present code with review summary showing all checks passed.

---

## Quick Review Checklist

### Security (Critical)
- [ ] No hardcoded secrets
- [ ] Input validation present (server-side)
- [ ] Authentication verified
- [ ] Authorization checked (role-based)
- [ ] RLS enabled (if database table)
- [ ] XSS prevention applied
- [ ] SQL injection prevented (parameterized queries)
- [ ] Rate limiting applied (API routes)

**Detailed checklist**: See `@.cursor/rules/review-checklists-security.mdc`

### Performance (High)
- [ ] No N+1 queries
- [ ] Pagination implemented (for lists)
- [ ] Indexes exist for filters
- [ ] Specific columns selected (not SELECT *)
- [ ] Memoization used (React - expensive calculations)
- [ ] Dynamic imports (large components)
- [ ] Bundle size checked (if new dependencies)

**Detailed checklist**: See `@.cursor/rules/review-checklists-performance.mdc`

### Business Logic (Critical)
- [ ] Booking dates validated
- [ ] Pricing calculated correctly
- [ ] HST 15% applied (Canadian tax)
- [ ] Equipment availability checked
- [ ] Seasonal rates applied (if applicable)
- [ ] Security deposit calculated (30% of total)

**Detailed checklist**: See `@.cursor/rules/review-checklists-business.mdc`

### Code Quality (High)
- [ ] TypeScript types correct (no `any`)
- [ ] Error handling comprehensive
- [ ] Logging structured (not console.log)
- [ ] No TODOs/FIXMEs (or documented)
- [ ] Code formatted (Prettier)
- [ ] Imports optimized (no unused)

**Detailed checklist**: See `@.cursor/rules/review-checklists-quality.mdc`

### Accessibility (High)
- [ ] Semantic HTML (not divs for buttons)
- [ ] ARIA labels (for icon buttons, complex UI)
- [ ] Form labels (all inputs labeled)
- [ ] Keyboard navigation (all interactive elements focusable)
- [ ] Focus indicators (visible)
- [ ] Color contrast (WCAG AA: 4.5:1 for text)

**Detailed checklist**: See `@.cursor/rules/review-checklists-accessibility.mdc`

---

## Review Output Format

### When Presenting Code

I will include a review summary:

```markdown
‚úÖ Self-Review Complete

**Security**: ‚úÖ Validated, authenticated, RLS enabled, rate limited
**Performance**: ‚úÖ Indexed queries, pagination applied, memoized calculations
**Business Logic**: ‚úÖ Pricing correct, dates validated, availability checked
**Code Quality**: ‚úÖ TypeScript strict, error handling complete, structured logging
**Accessibility**: ‚úÖ Semantic HTML, ARIA labels, keyboard navigation

[Code implementation here]
```

### If Issues Found

```markdown
‚ö†Ô∏è Self-Review: Issues Found

**Security**: ‚ö†Ô∏è Missing rate limiting on API route
**Performance**: ‚ö†Ô∏è Using SELECT * without pagination
**Business Logic**: ‚úÖ All checks passed
**Code Quality**: ‚ö†Ô∏è Using `any` type - should be specific interface
**Accessibility**: ‚úÖ All checks passed

**Fixes Applied**:
- Added rate limiting
- Changed to specific columns with pagination
- Created proper TypeScript interface

[Fixed code implementation here]
```

---

## Review Priorities

### Critical (Must Fix Before Presenting)
- Security vulnerabilities (hardcoded secrets, missing auth)
- SQL injection risks
- Missing RLS on user-facing tables
- Business logic errors (wrong pricing, availability)

### High (Should Fix)
- Performance issues (N+1 queries, missing indexes)
- Missing error handling
- TypeScript `any` types
- Missing accessibility features

### Medium (Nice to Have)
- Code formatting
- Unused imports
- Documentation TODOs

---

## ‚úÖ Success Criteria

Code is ready to present when:
- ‚úÖ All critical checks passed
- ‚úÖ All high-priority issues fixed
- ‚úÖ Review summary shows all green
- ‚úÖ Code follows all established patterns

---

**Status**: ‚úÖ Active Proactive Review System
**Review Dimensions**: 5 (Security, Performance, Business, Quality, Accessibility)
**Reference**: Detailed checklists in `review-checklists-*.mdc` files
